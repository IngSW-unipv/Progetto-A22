package it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.view.popUp;

import java.math.RoundingMode;

import it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.model.Base;
import it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.view.NumberSpinner;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class Selectmalware {

	public static int sX = 400;
	public static int sY = 400;	
	public static final Insets STANDARD_PADDING = new Insets(10, 10, 10, 10);
	private Base baseUtente;
	
	public Selectmalware(Base baseUtente) {
		this.baseUtente=baseUtente;
		
	}
	public void selectMalware(Base baseUtente) {

		Stage stage = new Stage();
		stage.initModality(Modality.APPLICATION_MODAL);
		stage.setX(sX); stage.setY(sY);
		
		VBox atck = new VBox();
		
		Label rc = new Label("Rootcrash: ");
		Label rcQty = new Label(String.valueOf(baseUtente.getQnt_rootcrash()));
		Label vr = new Label("Virus:     ");
		 
		Label vrQty = new Label(String.valueOf(baseUtente.getQnt_virus())); 
		Label use1 = new Label("Use: ");
		Label use2 = new Label("Use: ");
		TextField useRcTf = new TextField(); useRcTf.setMaxWidth(50);
		TextField useVrTf = new TextField(); useVrTf.setMaxWidth(50);
		NumberSpinner useRcNs = new NumberSpinner();
		NumberSpinner useVrNs = new NumberSpinner();
		
		HBox gB = new HBox();
		
		GridPane layout = new GridPane();
		layout.setMinSize(400, 80);

		layout.setPadding(STANDARD_PADDING);
		layout.setVgap(5);
		layout.setHgap(5);
		
		layout.add(rc, 0, 0);
		layout.add(rcQty, 1, 0);
		layout.add(use1, 2, 0);
		layout.add(useRcNs, 3, 0);
		layout.add(vr, 0, 1);
		layout.add(vrQty, 1, 1);
		layout.add(use2, 2, 1);
		layout.add(useVrNs, 3, 1);
				
		gB.getChildren().add(layout);
		
		HBox bA = new HBox();
		bA.setPadding(new Insets(0,10,10,10));
		bA.setAlignment(Pos.BASELINE_CENTER);
				
		Button button1 = new Button("Fight");
		button1.setPrefSize(200, 20);
		button1.setAlignment(Pos.CENTER);
		button1.getStyleClass().add("redbutton");
				
		button1.setOnAction(e -> {
			int useRc, useVr ;
			useRc = useRcNs.getNumber().setScale(0, RoundingMode.DOWN).intValueExact();
			useVr = useVrNs.getNumber().setScale(0, RoundingMode.DOWN).intValueExact();
			System.out.println(useRc + "  " + useVr);
			stage.close();
		});
	
		bA.getChildren().add(button1);
		bA.getStyleClass().add("redbutton");		
		atck.getChildren().addAll(gB, bA);		
		
		Scene scene = new Scene(atck, sX, sY);
		scene.getStylesheets().add("application.css");
		stage.setTitle("Seleziona Malware");
		stage.setScene(scene);						
		stage.showAndWait();

	}
}
