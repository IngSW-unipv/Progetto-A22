package it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.view.partita.popUp;

import it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.model.nodo.Nodo;
import it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.view.util.ComponentCreator;
import it.unipv.ingInf.ingSW.deltaTech4Java.serverDominator.view.util.NumberSpinner;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontPosture;
import javafx.scene.text.FontWeight;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class Selectmalware {

	public static int sX = 400;
	public static int sY = 400;	
	public static final Insets STANDARD_PADDING = new Insets(10, 10, 10, 10);
	private Nodo baseUtente;
	private Stage stage;
	private NumberSpinner quantitaRootCrash;
	private NumberSpinner quantitaVirus ;
	private Button fightButton;
	public Selectmalware(Nodo baseUtente) {
		this.baseUtente=baseUtente;
		fightButton=ComponentCreator.getIstance().createButton("Fight", Pos.CENTER);
		
	}
	public Selectmalware() {
		super();
		fightButton = ComponentCreator.getIstance().createButton("Fight", Pos.BASELINE_CENTER);

	}
	
	public void selectMalware(Nodo baseUtente) {
		this.baseUtente=baseUtente;
	}
	
	/**
	 * Interfaccia popup da cui si sceglie il malware per attaccare il nodo nemico
	 */
	public void selectMalware() {

		stage = new Stage();
		stage.initModality(Modality.APPLICATION_MODAL);
		stage.setX(sX); stage.setY(sY);
		
		VBox atck = new VBox();
		atck.setAlignment(Pos.TOP_CENTER);
		atck.setPadding(STANDARD_PADDING);
		
		HBox devTitle = new HBox();
		
		Label devTitleL = new Label("Scegli i malware da inviare");
		devTitleL.setFont(Font.font("Verdana", FontWeight.BOLD, FontPosture.REGULAR, 12));
		devTitleL.setTextFill(Color.DARKGREEN);
		devTitleL.setAlignment(Pos.BASELINE_CENTER);
		devTitle.getChildren().add(devTitleL);
		devTitle.setAlignment(Pos.BASELINE_CENTER);
		Label rc = new Label("Rootcrash: ");
		Label rcQty = new Label(String.valueOf(baseUtente.getStats_software_creati()[2].getQuantita()));
		Label vr = new Label("Virus:     ");
		 
		Label vrQty = new Label(String.valueOf(baseUtente.getStats_software_creati()[1].getQuantita())); 
		Label use1 = new Label("Use: ");
		Label use2 = new Label("Use: ");
		TextField useRcTf = new TextField(); useRcTf.setMaxWidth(50);
		TextField useVrTf = new TextField(); useVrTf.setMaxWidth(50);
		quantitaRootCrash = new NumberSpinner(0, baseUtente.getStats_software_creati()[2].getQuantita());
		quantitaRootCrash.getNumberField().setDisable(true);
		quantitaVirus = new NumberSpinner(0, baseUtente.getStats_software_creati()[1].getQuantita());
		quantitaVirus.getNumberField().setDisable(true);
		
		HBox gridPaneBox = new HBox();
		
		GridPane layout = new GridPane();
		layout.setMinSize(400, 80);

		layout.setPadding(STANDARD_PADDING);
		layout.setVgap(5);
		layout.setHgap(5);

		layout.add(rc, 0, 0);
		layout.add(rcQty, 1, 0);
		layout.add(use1, 2, 0);
		layout.add(quantitaRootCrash, 3, 0);
		layout.add(vr, 0, 1);
		layout.add(vrQty, 1, 1);
		layout.add(use2, 2, 1);
		layout.add(quantitaVirus, 3, 1);

				
		gridPaneBox.getChildren().add(layout);
		
		HBox bA = ComponentCreator.getIstance().createHbox(Pos.BASELINE_CENTER);
		bA.autosize();
		fightButton.setPrefWidth(200);
		bA.getChildren().add(fightButton);
		atck.autosize();
		atck.getChildren().addAll(devTitle,gridPaneBox, bA);		
		
		Scene scene = new Scene(atck, sX, sY);
		scene.getStylesheets().add("application.css");
		stage.setTitle("Seleziona Malware");
		stage.setScene(scene);						
		stage.showAndWait();
	}
	public Nodo getBaseUtente() {
		return baseUtente;
	}
	public void setBaseUtente(Nodo nodo) {
		this.baseUtente = nodo;
	}
	public Stage getStage() {
		return stage;
	}
	public void setStage(Stage stage) {
		this.stage = stage;
	}
	public Button getFightButton() {
		return fightButton;
	}
	public void setFightButton(Button fightButton) {
		this.fightButton = fightButton;
	}
	public int getQuantitaRootCrash() {
		return quantitaRootCrash.getNumber().intValue();
	}
	public int getQuantitaVirus() {
		return quantitaVirus.getNumber().intValue();
	}
	
}
